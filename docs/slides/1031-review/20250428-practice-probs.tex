% -*- mode:latex; -*-
\maketitle

Student Name: \hfill Student Email: \hspace{10em}
\section{Instructions}
\begin{itemize}
  \item Time allowed is $\infty$ minutes.
  \item In order to minimize distraction to your fellow students, you may not leave
  during the last 10 minutes of the examination.
  \item The examination is closed-book. One $8\times11$ in two-sided cheatsheet is allowed.
  \item Non-programmable calculators are permitted.
  \item The maximum number of marks is XXX, as indicated; the final examination
  amounts 10\% toward the final grade.
  \item Please use a pen or heavy pencil to ensure legibility. Colored
    pens/pencils are recommended for K-map grouping.
  \item Please show your work; where appropriate, marks will be awarded for proper and well-reasoned explanations.
  \item If you are behind on grades, you may submit the solutions to this on brightspace before the May 5th exam for (makeup) grades. If you are already ahead, then these grades won't push you beyond hundred in homework+midterm grades.
\end{itemize}
%\newpage

\begin{prob}
Use the following 5-variable K-map for F (B, C, D, E), and find
  a minimal SOP expression for F (15 marks)\\
\begin{minipage}{0.5\linewidth}
  \centering
  \begin{Karnaugh}{BC}{DE}
    \minterms{0,1,5,6,7,8,9,14}
  \end{Karnaugh}\\
  A=0
\end{minipage}%
\begin{minipage}{0.5\linewidth}
  \centering
  \begin{Karnaugh}{BC}{DE}
    \minterms{1,4,5,6,7,9,12,14}
  \end{Karnaugh}\\
  A=1
\end{minipage}
\end{prob}

\begin{prob}
  A sequential circuit has two inputs and two outputs. The inputs ($X_1$ and $X_0$ ) represent a 2-bit binary number, N. If the present value of N is greater than the previous value, then $Z_1$ is 1. If the present value of N is less than the previous value, then $Z_2$ is 1. \textbf{Otherwise}, $Z_1$ and $Z_2$ are 0. When the first pair of inputs is received, there is no previous value of N, so we cannot determine whether the present N is greater than or less than the previous value; therefore, the “otherwise” category applies.

Find a Mealy state table for the circuit (minimum number of states, including starting state, is five) (30 marks).
\label{p:fsm}
\end{prob}
(Hint: The header for Mealy State table will look something like this:)\\
\begin{tabular}{c|c|c|c|c|c|c|c|c}
  \toprule
  Present State & \multicolumn{4}{c|}{ Next State} & \multicolumn{4}{c}{Outputs ($Z_1 Z_2$)} \\
                & Inputs $X_1X_0=$ 00 & 01 & 10 & 11 & $X_1X_0=$ 00 & 01 & 10 & 11 \\
  \midrule
  $S_0$  & $S_1$ & $S_2$ & $S_3$ & $S_4$ & 00 & 00 & 00 & 00 \\
\end{tabular}
%\newpage

% \begin{prob}
%   % 15.15
%   Reduce the following state table to minimum number of states (30 marks)\\
%   \begin{tabular}{c|cc|cc}
%   \end{tabular}
%   \includegraphics[width=0.3\linewidth]{./fig/15.15-state-table.png}
%   \label{p:state-reduction}
% \end{prob}
% %\newpage
% 
% \begin{prob}
%   % Reduce the following state table to a minimum number of states using
%   % implication charts (20 marks).
%   \begin{enumerate}
%   \item
%     Use the guideline method (Highest priority and Medium priority only) to determine a suitable \textbf{state assignment} for the state table (20 marks).
%   % % \item
%   % % Realize the table using D flip-flops.
%   \item Realize the least significant bit of the encoding table using J-K flip-flops (30 marks).
%   \end{enumerate} 
% 
%   \begin{tabular}{c|cc|c}
%     \toprule
%     Present State & \multicolumn{2}{c|}{Next State} & Output (Z)\\
%                   & X = 0 & 1 & \\
%                   \midrule
%     A & A & B & 1\\
%     B & C & E & 0\\
%     C & F & G & 1\\
%     D & C & A & 0\\
%     E & B & G & 1\\
%     F & F & B & 1\\
%     G & C & F & 0\\
%     \bottomrule
%   \end{tabular}
% \end{prob}
%\newpage

\begin{prob}
  A 4:2 priority encoder takes 4 inputs $y_0, y_1, y_2, y_3$ and has three outputs, $w_1, w_0$ and $\text{IST}$. Find boolean expressions for $w_1$ and $w_0$ using K-maps for the priority encoder. The priority encoder truth table is given for reference (``*'' indicates all possible input combinations and ``d'' indicates don't care output). (10 marks) \\
  \begin{tabular}{cccc|ccc}
    \toprule
    \multicolumn{4}{c|}{Inputs} & \multicolumn{3}{c}{Outputs}\\
    $y_0$ & $y_1$ & $y_2$ & $y_3$ & $w_1$ & $w_0$ & $\text{IST}$ \\
    \midrule
    0 & 0 & 0 & 0 & d & d & 0\\
    1 & * & * & * & 0 & 0 & 1\\
    0 & 1 & * & * & 0 & 1 & 1\\
    0 & 0 & 1 & * & 1 & 0 & 1\\
    0 & 0 & 0 & 1 & 1 & 1 & 1\\
    \midrule
  \end{tabular}
\end{prob}
%\newpage

\begin{prob}
  % 9 study guide 5
  The following diagram shows the pattern of 0’s and 1’s stored in a ROM
  with eight words and four bits per word. What will be the values of $F_1 , F_2 ,
  F_3 , and F_4$ if $A= B = 0$ and $C = 1$?
  Also give the minterm expansions for $F_1$ and $F_2$ (20 marks).\\
  \includegraphics[width=0.4\linewidth]{./fig/ROM-minterms.png}
\end{prob}
%\newpage

\begin{prob}
  The following prime implicant table is for a four variable function $f(A, B,
  C, D)$.
  Give the algebraic expression of each of the essential prime implicants. Find
  the minimal sum of products expression for $f$ by PI table reduction. (10 marks)
  \\
  \begin{tabular}{ccccc}
    \toprule
    minterms \textbackslash PIs: & $\bB D$ & $\bB C$ & CD & AD  \\
    \midrule
    2  &   & $\times$ & & \\
    3  & $\times$ & $\times$ & $\times$ & \\ 
    7  &  & & $\times$ & \\ 
    9  & $\times$ & & & $\times$ \\ 
    11 & $\times$ & $\times$ & $\times$ & $\times$ \\ 
    13 &  & & & $\times$ \\
    \bottomrule
  \end{tabular}\\
\end{prob}
%\newpage

\begin{prob}
  Packages arrive at the stockroom and are delivered on carts to offices and laboratories
  by student employees.The carts and packages are various sizes and shapes.The students
  are paid according to the carts used. There are five carts and the pay for their use is\\
  Cart C1: \$2\\
  Cart C2: \$1\\
  Cart C3: \$4\\
  Cart C4: \$2\\
  Cart C5: \$2\\
  On a particular day, seven packages arrive, and they can be delivered using the five
  carts as follows:\\
  C1 can be used for packages P1, P3, and P4. \\
  C2 can be used for packages P2, P5, and P6. \\
  C3 can be used for packages P1, P2, P5, P6, and P7. \\
  C4 can be used for packages P3, P6, and P7. \\
  C5 can be used for packages P2 and P4. \\
  The stockroom manager wants the packages delivered at minimum cost. Using
  minimization techniques described in this class, present a systematic procedure for
  finding the minimum cost solution. (20 marks)
\end{prob}
%\newpage

\begin{prob}
  (a) For $V_{IH}$ = 4 V, $V_{OH}$ = 4.5 V, $V_{IL}$ = 1 V, $V_{OL}$ = 0.3 V, and $V_{DD}$ = 5 V, calculate the
  noise margins $NM_H$ and $NM_L$ (5 marks).\\
  (b) Draw an eight-input NAND gate built using NMOS technology and pull-up
  resistor (5 marks).\\
  (c) In the above circuit, if the voltage drop
  across each transistor is 0.1 V, what is $V_{OL}$ ? What is the corresponding $NM_L$ using the other
  parameters from part (a) (10 marks).
\end{prob}
%\newpage

\begin{prob}
  What is the difference between positive logic and negative logic? Design a
  CMOS complex gate for $f = x_1 \bx_2 + \bx_1 x_2$ under negative logic (10 marks).
\end{prob}
%\newpage

\begin{prob}
  Find the propagation delay and contamination  delay of the following circuit (5 marks):\\
  \includegraphics[width=0.4\linewidth]{./fig/fig2.83-circuit.png} 
\end{prob}
%\newpage

\begin{prob}
  Describe how tri-state and open-collector outputs are different from totem-
  pole outputs using NMOS NOR gate as an example (10 marks).
\end{prob}
%\newpage

% \begin{prob}
%   Assume that the inverter in the given circuit has a propagation delay of 5 ns and the
%   AND gate has a propagation delay of 10 ns. Draw a timing diagram for the circuit
%   showing X, Y, and Z. Assume that X is initially 0, Y is initially 1, after 10 ns X
%   becomes 1 for 80 ns, and then X is 0 again. (20 marks)\\
%   \includegraphics[width=0.4\linewidth]{./fig/fig-not-AND-latch.png}
% \end{prob}
%\newpage

\begin{prob}
  A latch can be constructed from an OR gate, an AND gate, and an inverter con-
  nected as follows: \\
  \includegraphics[width=0.4\linewidth]{./fig/or-AND-latch.png}\\
  \begin{enumerate}
    \item  What restriction must be placed on R and H so that P will always equal Q
    (under steady-state conditions) (10 marks)?
  \item Construct a characteristic (next-state) table and derive the
    corresponding characteristic equation for the latch (5 marks).
  \item Complete the following timing diagram for the latch (10 marks)\\
    \includegraphics[width=0.4\linewidth]{./fig/timing-diagram.png}
  \end{enumerate}
\end{prob}
%\newpage

\begin{prob}
  Figure~\ref{fig:seven-seg-display} shows the notation for a BCD to 7-segment
display and Table~\ref{tab:seven-segment-tt} shows the corresponding truth
table. The inputs corresponding to the missing rows in the truth table should be
considered as don't care.
  \begin{enumerate}
   \item implement segment ``a'' using an 8:1 mux and no other logic gate, (10 marks)
   \item implement segment ``a'' using a 4:1 mux and one other gate, (10 marks)
   \item implement segment ``f'' with 4:1 mux and no other logic gate. Assume
     inputs are available in both uncomplemented and complemented form. (Hint:
     There are (${}^4C_2 = 6$) possible pairs of control inputs: ($w_3, w_2$), ($w_2, w_1$),
     ($w_1,w_0$), ($w_0, w_3$), ($w_0, w_2$), ($w_1, w_3$). There are 6 don't
     care conditions. With two control inputs of the multiplexer and one input,
     you can represent an expression with up to 4-SOP-terms of size
     three-literals or less. You might the arrive at the answer sooner, if you
     try to write the minimal SOP expression first and find the two inputs that
     occur most often in all the terms. Those two inputs are most likely to be the
     chosen pair of control inputs.) (10 marks)
  \end{enumerate}
\end{prob}

\begin{table}[h!]
  \footnotesize
\begin{tabular}{l|cccc||ccccccc}
  \toprule
  Row & $w_3$ & $w_2$ & $w_1$ & $w_0$ & a & b & c & d & e & f & g \\
  \midrule
  0  & 0    & 0   &   0 &   0 & 1 & 1 & 1 & 1 & 1 & 1 & 0 \\
  1  & 0    & 0   &   0 &   1 & 0 & 1 & 1 & 0 & 0 & 0 & 0 \\
  2  & 0    & 0   &   1 &   0 & 1 & 1 & 0 & 1 & 1 & 0 & 1 \\ 
  3  & 0    & 0   &   1 &   1 & 1 & 1 & 1 & 1 & 0 & 0 & 1 \\ 
  4  & 0    & 1   &   0 &   0 & 0 & 1 & 1 & 0 & 0 & 1 & 1 \\ 
  5  & 0    & 1   &   0 &   1 & 1 & 0 & 1 & 1 & 0 & 1 & 1 \\   
  6  & 0    & 1   &   1 &   0 & 1 & 0 & 1 & 1 & 1 & 1 & 1 \\ 
  7  & 0    & 1   &   1 &   1 & 1 & 1 & 1 & 0 & 0 & 0 & 0 \\ 
  8  & 1    & 0   &   0 &   0 & 1 & 1 & 1 & 1 & 1 & 1 & 1 \\
  9  & 1    & 0   &   0 &   1 & 1 & 1 & 1 & 1 & 0 & 1 & 1 \\
  \bottomrule
\end{tabular}
\caption{Truth table for BCD to seven-segment display as shown in
  Figure~\ref{fig:seven-seg-display}. The missing combinations of inputs should
  be considered as dont care.}
\label{tab:seven-segment-tt}
\end{table}

\begin{figure}[h!]
  \includegraphics[width=\linewidth,trim=0 10cm 0 0.2cm,clip]{fig/fig-4.21.png}
  \\
  \caption{Seven segment display and BCD-to-7-segment display converter. When
    $a=1$ the corresponding segment of the display lights up. To display the
    number 8, you will turn on all the seven segments, while to display 1, you
    will turn on $b=1, c=1$ and turn off $=0$ the rest. The full truth-table for
  the seven-segment display is shown in Table~\ref{tab:seven-segment-tt}.}
  \label{fig:seven-seg-display}
\end{figure}

%\begin{prob}
%  Design a 4-bit BCD counter that counts from 0000, to 1001 and then loops back
%  to 0000 (20 marks).\\
%  \begin{enumerate}
%  \item Draw its state transition diagram and table
%  \item Design the circuit using a D flip-flop.
%  \end{enumerate}
%\end{prob}
%\newpage

\begin{prob}
  Design a 3-bit modulo 8 counter that counts from 000, to 111 and then loops back
  to 0000. (A modulo N counter counts from 0 to $N-1$) (20 marks).\\
  \begin{enumerate}
  \item Draw its state transition table
  \item Design the circuit using a D flip-flop.
  \end{enumerate}
\end{prob}


\begin{prob}
Draw Mealy state transition diagram which investigates an input sequence
$X$ and will produce an output of $Z=1$ for any input sequence ending in 0011 or 110.\\
Example:\\
\begin{tabular}{c c c c c c c c c c c c c c c c}
$X=$&1&1&0&0&1&0&0&1&0&1&0&0&1&0&1\\
$Z=$&0&0&0&1&0&1&1&0&1&0&0&1&0&1&0
\end{tabular}\\
Notice that the circuit does not reset to the start state when an output of $Z = 1$
occurs. A minimum solution requires six states. Assign 000 to the start state. (20 marks).
\end{prob}

\begin{prob}
  Find the expression for $J_0$ and $K_0$ assuming that $J_0$ and $K_0$ are inputs to the J-K flip flop that capture the state of the second most significant bit $Q_0$ of the following state encoded table. The state encoding table given with state encoding denoted as $Q_2 Q_1 Q_0$. (20 marks).
%\\\includegraphics[width=0.6\linewidth]{./media/Roth13.13-state-assigned-table.png}
\\
\begin{tabular}{ccccc}
  \toprule
  Present State & \multicolumn{2}{c}{Next State} & \multicolumn{2}{c}{Output}\\
                & $X=0$ & $X=1$ & $X=0$ & $X=1$ \\
  $Q_2 Q_1 Q_0$ & $Q_2^+ Q_1^+ Q_0^+$ & $Q_2^+ Q_1^+ Q_0^+$ & $Z$ & $Z$ \\
  \midrule
  000 & 100 & 101 & 1 & 0 \\
  001 & 100 & 101 & 0 & 1 \\
  010 & 000 & 000 & 1 & 0 \\
  011 & 000 & 000 & 0 & 1 \\
  100 & 111 & 110 & 1 & 0 \\
  101 & 110 & 110 & 0 & 1 \\
  110 & 011 & 010 & 1 & 0 \\
  111 & 011 & 011 & 0 & 1 \\
  \bottomrule
\end{tabular}
\end{prob}
